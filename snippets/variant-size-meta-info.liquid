<!-- variant-size-meta-info -->

<div id="VariantSpecs-{{ section.id }}">
  <div style="border: 2px solid;border-image: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);  border-image-slice: 1; padding: 15px; margin-bottom: 20px;">
    <h3
      style="
        color: #000; margin-bottom: 10px; background: #924c26;background: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      "
    >
      <strong>Metal</strong>
    </h3>
    <ul id="variant-metal-info" style="list-style: none; padding: 0;"></ul>
  </div>

  <div
    id="variant-diamond-block"
    class="hidden"
    style="border: 2px solid;border-image: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);  border-image-slice: 1; padding: 15px; margin-bottom: 20px;overflow-x:auto;"
  >
    <h3
      style="
        color: #000; margin-bottom: 10px;background: #924c26;
        background: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      "
    >
      <strong>Diamond</strong>
    </h3>
    <table style="min-width:100%;border-collapse: collapse; border: none;">
      <thead>
        <tr style="background-color: #f9f9f9;">
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Type</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Clarity</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">No of Diamonds</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Weight</th>
        </tr>
      </thead>
      <tbody id="diamond-table-body"></tbody>
    </table>
  </div>

  <div
    id="variant-solitaire-block"
    class="hidden"
    style="border: 2px solid;border-image: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);  border-image-slice: 1; padding: 15px; margin-bottom: 20px;overflow-x:auto;"
  >
    <h3
      style="
        color: #000; margin-bottom: 10px;background: #924c26;
        background: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      "
    >
      <strong>Solitaire</strong>
    </h3>
    <table style="min-width:100%;border-collapse: collapse; border: none;">
      <thead>
        <tr style="background-color: #f9f9f9;">
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Weight</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Clarity</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Color</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Shape</th>
        </tr>
      </thead>
      <tbody id="solitaire-table-body"></tbody>
    </table>
  </div>

  <div
    id="variant-gemstone-block"
    class="hidden"
    style="border: 2px solid;border-image: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);  border-image-slice: 1; padding: 15px; margin-bottom: 20px;overflow-x:auto;"
  >
    <h3
      style="
        color: #000; margin-bottom: 10px;background: #924c26;
        background: linear-gradient(to right, #924c26 0%, #ce875e 49%, #924c26 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      "
    >
      <strong>Gemstone</strong>
    </h3>
    <table style="min-width:100%;border-collapse: collapse; border: none;">
      <thead>
        <tr style="background-color: #f9f9f9;">
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Type</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Quality</th>
          <th style="text-align: left; border-bottom: 2px solid #000; padding-bottom: 8px;">Weight</th>
        </tr>
      </thead>
      <tbody id="gemstone-table-body"></tbody>
    </table>
  </div>
</div>

<script>
  (function () {
    window.renderVariantMetaInfo = function (config) {
      try {
        const metalBlock = document.querySelector('#variant-metal-info');
        const diamondBlock = document.querySelector('#variant-diamond-block');
        const diamondBody = document.querySelector('#diamond-table-body');
        const solitaireBlock = document.querySelector('#variant-solitaire-block');
        const solitaireBody = document.querySelector('#solitaire-table-body');
        const gemstoneBlock = document.querySelector('#variant-gemstone-block');
        const gemstoneBody = document.querySelector('#gemstone-table-body');

        if (
          !metalBlock ||
          !diamondBlock ||
          !diamondBody ||
          !solitaireBlock ||
          !solitaireBody ||
          !gemstoneBlock ||
          !gemstoneBody
        ) {
          console.warn('Missing DOM elements for meta rendering.');
          return;
        }

        // If config is null, clear and hide
        if (!config) {
          metalBlock.innerHTML = '';
          metalBlock.parentElement.classList.add('hidden');
          diamondBody.innerHTML = '';
          diamondBlock.classList.add('hidden');
          solitaireBody.innerHTML = '';
          solitaireBlock.classList.add('hidden');
          gemstoneBody.innerHTML = '';
          gemstoneBlock.classList.add('hidden');
          return;
        }

        // Render Metal Info
        metalBlock.innerHTML = `
          <li><strong>Metal:</strong> ${config.metal?.type || 'N/A'}</li>
          <li><strong>Purity:</strong> ${config.metal?.purity || 'N/A'}</li>
          {% comment %} <li><strong>Weight:</strong> ${config.metal?.weight || 'N/A'}</li> {% endcomment %}
           <li><strong>Weight:</strong> ${config.metal?.weight ? config.metal.weight + ' Gms' : 'N/A'}</li>
        `;

        // Render Diamond Info (supports both round and others)
        const hasRoundDiamonds = Array.isArray(config.diamond?.round) && config.diamond.round.length > 0;
        const hasOtherDiamonds = Array.isArray(config.diamond?.others) && config.diamond.others.length > 0;

        if (hasRoundDiamonds || hasOtherDiamonds) {
          diamondBody.innerHTML = '';

          if (hasRoundDiamonds) {
            config.diamond.round.forEach((diamond) => {
              diamondBody.innerHTML += `
                <tr>
                  <td>${config.diamond.type || 'Studded'}</td>
                  <td>${config.diamond.clarity || 'N/A'}</td>
                  <td>${diamond.total_count || 0}</td>
                  <td>${diamond.carat || 0} CT</td>
                </tr>
              `;
            });
          }

          if (hasOtherDiamonds) {
            config.diamond.others.forEach((diamond) => {
              diamondBody.innerHTML += `
                <tr>
                  <td>${config.diamond.type || 'Studded'}</td>
                  <td>${config.diamond.clarity || 'N/A'}</td>
                  <td>${diamond.total_count || 0}</td>
                  <td>${diamond.carat || 0} CT</td>
                </tr>
              `;
            });
          }

          diamondBlock.classList.remove('hidden');
        } else {
          diamondBody.innerHTML = '';
          diamondBlock.classList.add('hidden');
        }

        // Render Solitaire Info
        if (Array.isArray(config.solitaire?.details) && config.solitaire.details.length > 0) {
          solitaireBody.innerHTML = '';
          config.solitaire.details.forEach((solitaire) => {
            solitaireBody.innerHTML += `
              <tr>
                <td>${solitaire.carat || 'N/A'} CT</td>
                <td>${solitaire.clarity || 'N/A'}</td>
                <td>${solitaire.color || 'N/A'}</td>
                <td>${solitaire.shape || 'N/A'}</td>
              </tr>
            `;
          });
          solitaireBlock.classList.remove('hidden');
        } else {
          solitaireBody.innerHTML = '';
          solitaireBlock.classList.add('hidden');
        }

        // Render Gemstone Info
        if (Array.isArray(config.gemstone) && config.gemstone.length > 0) {
          gemstoneBody.innerHTML = '';
          config.gemstone.forEach((gem) => {
            gemstoneBody.innerHTML += `
              <tr>
                <td>${gem.type || 'N/A'}</td>
                <td>${gem.quality || 'N/A'}</td>
                <td>${gem.carat || 'N/A'} CT</td>
              </tr>
            `;
          });
          gemstoneBlock.classList.remove('hidden');
        } else {
          gemstoneBody.innerHTML = '';
          gemstoneBlock.classList.add('hidden');
        }
      } catch (e) {
        console.error('renderVariantMetaInfo failed:', e);
      }
    };
  })();
</script>
