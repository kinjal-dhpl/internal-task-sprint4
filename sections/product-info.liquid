{{ 'product-info.css' | asset_url | stylesheet_tag }}

<section class="info-tabs">
  <!-- Tab Buttons -->
  <div class="tab-buttons page-width ">
    <button class="tab-btn active" data-tab="product-info">
      <h2>Product Information</h2>
      <span class="tab-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24">
          <path d="M3 12h18M12 3v18" stroke="#000" stroke-width="2" stroke-linecap="round" />
        </svg>
      </span>
    </button>

    <button class="tab-btn" data-tab="policies">
      <h2>Policies</h2>
      <span class="tab-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24">
          <path d="M3 12h18M12 3v18" stroke="#000" stroke-width="2" stroke-linecap="round" />
        </svg>
      </span>
    </button>
  </div>

  <!-- Tab Content Wrapper -->
  <div class="tab-contents page-width">
    <!-- Product Information Tab -->
    <div class="faq-sec-mobile">
      <button class="tab-btn active tab-btn-mobile" data-tab="product-info">
        <h2>Product Information</h2>
        <span class="tab-icon">
          <svg
            class="toggleIcon"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path class="horizontal" d="M3 12h18" stroke="#000" stroke-width="2" stroke-linecap="round"></path>
            <path class="vertical" d="M12 3v18" stroke="#000" stroke-width="2" stroke-linecap="round"></path>
          </svg>
        </span>
      </button>
      <div id="product-info" class="tab-content active">
        {% if section.settings.top_head != blank %}
          <p class="para-id">{{ section.settings.top_head }}</p>
        {% endif %}
        <div class="product-info-grid">
          <!-- Left Box -->
          {% assign dimensions = product.metafields.custom.ring_width.value %}

            <div class="top-text display-flex-column">
              <h2>Dimensions</h2>
              <div class="info-box flex-grow">
                <div class="single-info">
                  <div class="single-info-head">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M12.1054 0.43993C12.2447 0.300465 12.4102 0.189827 12.5923 0.11434C12.7744 0.038854 12.9696 0 13.1667 0C13.3638 0 13.559 0.038854 13.7411 0.11434C13.9232 0.189827 14.0886 0.300465 14.2279 0.43993L17.4079 3.62143C17.5474 3.76074 17.658 3.92617 17.7335 4.10827C17.809 4.29037 17.8479 4.48556 17.8479 4.68268C17.8479 4.8798 17.809 5.07499 17.7335 5.25709C17.658 5.43919 17.5474 5.60462 17.4079 5.74393L5.74393 17.4109C5.46264 17.6921 5.08118 17.8501 4.68343 17.8501C4.28568 17.8501 3.90422 17.6921 3.62293 17.4109L0.43993 14.2294C0.300466 14.0901 0.189827 13.9247 0.11434 13.7426C0.038854 13.5605 0 13.3653 0 13.1682C0 12.9711 0.038854 12.7759 0.11434 12.5938C0.189827 12.4117 0.300466 12.2462 0.43993 12.1069L12.1054 0.43993ZM3.42793 11.2399L1.49893 13.1674L4.68193 16.3504L16.3489 4.68343L13.1674 1.50043L11.2384 3.42943L12.9844 5.17543L11.9239 6.23593L10.1779 4.48993L8.98843 5.67943L10.7344 7.42543L9.67393 8.48593L7.92793 6.73993L6.73843 7.92943L8.48443 9.67543L7.42393 10.7359L5.67793 8.98993L4.48843 10.1794L6.23443 11.9254L5.17393 12.9859L3.42793 11.2399Z" fill="#1D1D1F"/>
                    </svg>
                    <p>Ring Width</p>
                  </div>
                </div>
              </div>
            </div>

          <!-- Right Box -->
          {% if section.settings.care_instructions != blank %}
            <div class="top-text display-flex-column">
              <h2>Care Instructions</h2>
              <div class="info-box info-list flex-grow">
                {{ section.settings.care_instructions }}
              </div>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
    <!-- Policies Tab -->
    <div class="faq-sec-mobile">
      <button class="tab-btn tab-btn-mobile" data-tab="policies">
        <h2>Policies</h2>
        <span class="tab-icon">
          <svg
            class="toggleIcon"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path class="horizontal" d="M3 12h18" stroke="#000" stroke-width="2" stroke-linecap="round"></path>
            <path class="vertical" d="M12 3v18" stroke="#000" stroke-width="2" stroke-linecap="round"></path>
          </svg>
        </span>
      </button>
      <div id="policies" class="tab-content">
        <div class="section-header">
          <p>Simple, transparent policies designed to give you complete confidence in your purchase</p>
        </div>

        {% assign policies = product.metafields.custom.policymeta.value %}

        {% if policies != blank %}
          <div class="policies-container">
            {% for policy in policies %}
              {% if policy.image != blank
                or policy.container_top_text != blank
                or policy.container_desc != blank
                or policy.container_bottom_text != blank
              %}
                <div class="policy-card">
                  <div class="policy-icon">
                    {% if policy.image != blank %}
                      {{ policy.image }}
                      <!-- if your icon is stored as SVG in a metaobject rich text -->
                    {% endif %}
                    {% if policy.container_top_text != blank %}
                      <h3>{{ policy.container_top_text }}</h3>
                    {% endif %}
                  </div>

                  {% if policy.container_desc != blank %}
                    <p class="id-unique">{{ policy.container_desc }}</p>
                  {% endif %}
                  {% if policy.container_bottom_text != blank %}
                    <p>{{ policy.container_bottom_text }}</p>
                  {% endif %}
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}

        {% if section.settings.important_info != blank %}
          <div class="important-info">
            <h2>Important information</h2>
            <div class="info-list">
              <ul>
                <li>
                  {{ section.settings.important_info }}
                </li>
              </ul>
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.info-tabs .tab-btn');
    const tabs = document.querySelectorAll('.info-tabs .tab-content');

    buttons.forEach((btn) => {
      btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('data-tab');
        const targetTab = document.getElementById(targetId);
        if (!targetTab) {
          return;
        }
        if (window.innerWidth <= 768) {
          // Mobile behavior: toggle open/close like FAQ
          const isOpen = btn.classList.contains('active');
          buttons.forEach((b) => b.classList.remove('active'));
          tabs.forEach((tab) => tab.classList.remove('active'));
          if (!isOpen) {
            btn.classList.add('active');
            targetTab.classList.add('active');
          }
        } else {
          buttons.forEach((b) => b.classList.remove('active'));
          tabs.forEach((tab) => tab.classList.remove('active'));
          btn.classList.add('active');
          targetTab.classList.add('active');
        }

        if (window.innerWidth <= 768) {
          buttons.forEach((button) => {
            const verticalLine = button.querySelector('.vertical');
            if (!verticalLine) return;
            verticalLine.classList.toggle('hidden', !button.classList.contains('active'));
          });
        }
      });
    });

    const syncMobileIcons = () => {
      if (window.innerWidth > 768) {
        buttons.forEach((button) => {
          const verticalLine = button.querySelector('.vertical');
          if (verticalLine) {
            verticalLine.classList.remove('hidden');
          }
        });
      }
    };

    window.addEventListener('resize', syncMobileIcons);
    syncMobileIcons();
  });
</script>

{% schema %}
{
  "name": "product_section",
  "settings": [
    {
      "type": "text",
      "id": "top_head",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "care_instructions",
      "label": "Care Instructions"
    },
    {
      "type": "richtext",
      "id": "important_info",
      "label": "Important Information"
    }
  ],
  "presets": [
    {
      "name": "product_section"
    }
  ]
}
{% endschema %}